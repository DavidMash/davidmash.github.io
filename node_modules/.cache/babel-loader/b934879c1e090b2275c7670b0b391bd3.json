{"ast":null,"code":"var _jsxFileName = \"/Users/davidmash/Documents/portfolio/src/Components/AudioVisualizer.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from 'react';\nimport myWorker from '../js/myWorker.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction AudioVisualizer(props) {\n  _s();\n  const [audioElement, setAudioElement] = useState(null);\n  const [loaded, setLoaded] = useState(false);\n  const canvasAreaRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const frequencyRef = useRef(null);\n  const backgroundRef = useRef(null);\n  const scrubBarRef = useRef(null);\n  const [play, setPlay] = useState(false);\n  const [mouseOverBottom, setMouseOverBottom] = useState(false);\n\n  // create a new web worker\n  const worker = new Worker(myWorker);\n  useEffect(() => {\n    // send the file input and canvas refs to the worker\n    const canvasWidth = canvasAreaRef.current.offsetWidth;\n    const canvasHeight = canvasAreaRef.current.offsetHeight;\n    worker.postMessage({\n      fileInputRef,\n      canvasWidth,\n      canvasHeight,\n      scrubBarRef,\n      setLoaded,\n      setPlay,\n      frequencyRef,\n      backgroundRef\n    });\n    worker.onmessage = e => {\n      // handle messages from the worker\n      if (e.data.type === 'loaded') {\n        setLoaded(true);\n      } else if (e.data.type === 'scrubBarValue') {\n        scrubBarRef.current.value = e.data.value;\n      }\n    };\n    return () => {\n      // stop the worker when the component unmounts\n      worker.terminate();\n    };\n  }, [play, fileInputRef]);\n\n  // Initialize audio context and elements when the file input changes\n  function loadAudio() {\n    if (audioElement) {\n      audioElement.pause();\n      audioElement.currentTime = 0;\n    }\n    setAudioElement(new Audio());\n  }\n  function updatePlayback() {\n    if (audioElement && scrubBarRef.current) {\n      let scrubBarValue = scrubBarRef.current.value;\n      let currentTime = scrubBarValue / 100 * audioElement.duration;\n      audioElement.currentTime = currentTime;\n    }\n  }\n  function togglePlay() {\n    if (audioElement) {\n      if (audioElement.paused) {\n        audioElement.play();\n        setPlay(true);\n      } else {\n        audioElement.pause();\n        setPlay(false);\n      }\n    }\n  }\n  if (!audioElement) {\n    loadAudio();\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: props.style,\n    className: \"canvas-area no-select\",\n    ref: canvasAreaRef,\n    children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-header-container\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"main-header\",\n        style: play ? {\n          opacity: 0,\n          transition: \"2s opacity\"\n        } : {\n          opacity: 0.8,\n          transition: \"3s opacity\"\n        },\n        children: \"David Mash\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), loaded ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"control-panel\",\n      onClick: togglePlay,\n      children: play ? /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"\",\n        src: process.env.PUBLIC_URL + '/images/pause-button.png',\n        className: \"pause-button\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"\",\n        src: process.env.PUBLIC_URL + '/images/play-button.png',\n        className: \"play-button\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: frequencyRef,\n      id: \"frequency\",\n      onClick: togglePlay\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: backgroundRef,\n      id: \"background\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      alt: \"\",\n      src: process.env.PUBLIC_URL + '/images/main_images/' + props.imageNumber + '.jpeg',\n      style: {\n        objectFit: \"cover\",\n        height: \"100%\",\n        minWidth: \"100%\",\n        width: \"auto\",\n        position: \"absolute\",\n        zIndex: \"-3\",\n        top: \"0px\",\n        left: \"0px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bottom-controls\",\n      onMouseOver: () => {\n        if (!mouseOverBottom) setMouseOverBottom(true);\n      },\n      onMouseLeave: () => {\n        if (mouseOverBottom) setMouseOverBottom(false);\n      },\n      style: mouseOverBottom ? {\n        opacity: 0.8,\n        transition: \"opacity 300ms\"\n      } : play ? {\n        opacity: 0,\n        transition: \"opacity 300ms\"\n      } : {\n        opacity: 0.4,\n        transition: \"opacity 300ms\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: scrubBarRef,\n        className: \"scrub-bar\",\n        type: \"range\",\n        min: \"0\",\n        max: \"100\",\n        defaultValue: 0,\n        id: \"scrub-bar\",\n        disabled: !loaded,\n        onChange: () => {\n          updatePlayback();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n}\n_s(AudioVisualizer, \"fnOuns0ylvlJRM8NdvyLEaTBsbE=\");\n_c = AudioVisualizer;\nexport default AudioVisualizer;\nvar _c;\n$RefreshReg$(_c, \"AudioVisualizer\");","map":{"version":3,"names":["React","useRef","useState","useEffect","myWorker","AudioVisualizer","props","audioElement","setAudioElement","loaded","setLoaded","canvasAreaRef","fileInputRef","frequencyRef","backgroundRef","scrubBarRef","play","setPlay","mouseOverBottom","setMouseOverBottom","worker","Worker","canvasWidth","current","offsetWidth","canvasHeight","offsetHeight","postMessage","onmessage","e","data","type","value","terminate","loadAudio","pause","currentTime","Audio","updatePlayback","scrubBarValue","duration","togglePlay","paused","style","opacity","transition","process","env","PUBLIC_URL","imageNumber","objectFit","height","minWidth","width","position","zIndex","top","left"],"sources":["/Users/davidmash/Documents/portfolio/src/Components/AudioVisualizer.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport myWorker from '../js/myWorker.js';\n\nfunction AudioVisualizer(props) {\n    const [audioElement, setAudioElement] = useState(null);\n    const [loaded, setLoaded] = useState(false);\n    const canvasAreaRef = useRef(null);\n    const fileInputRef = useRef(null);\n    const frequencyRef = useRef(null);\n    const backgroundRef = useRef(null);\n    const scrubBarRef = useRef(null);\n    const [play, setPlay] = useState(false);\n    const [mouseOverBottom, setMouseOverBottom] = useState(false);\n\n    // create a new web worker\n    const worker = new Worker(myWorker);\n\n    useEffect(() => {\n        // send the file input and canvas refs to the worker\n        const canvasWidth = canvasAreaRef.current.offsetWidth;\n        const canvasHeight = canvasAreaRef.current.offsetHeight;\n        worker.postMessage({ fileInputRef, canvasWidth, canvasHeight, scrubBarRef, setLoaded, setPlay, frequencyRef, backgroundRef});\n\n        worker.onmessage = (e) => {\n            // handle messages from the worker\n            if (e.data.type === 'loaded') {\n                setLoaded(true);\n            } else if (e.data.type === 'scrubBarValue') {\n                scrubBarRef.current.value = e.data.value;\n            }\n        };\n\n        return () => {\n            // stop the worker when the component unmounts\n            worker.terminate();\n        };\n    }, [play, fileInputRef]);\n\n    // Initialize audio context and elements when the file input changes\n    function loadAudio() {\n        if (audioElement) {\n            audioElement.pause();\n            audioElement.currentTime = 0;\n        }\n        setAudioElement(new Audio());\n    }\n\n    function updatePlayback() {\n        if(audioElement && scrubBarRef.current) {\n            let scrubBarValue = scrubBarRef.current.value;\n            let currentTime = (scrubBarValue / 100) * audioElement.duration;\n            audioElement.currentTime = currentTime;\n        }\n    }\n\n    function togglePlay() {\n        if (audioElement) {\n            if (audioElement.paused) {\n                audioElement.play();\n                setPlay(true);\n            } else {\n                audioElement.pause();\n                setPlay(false);\n            }\n        }\n    }\n\n    if (!audioElement) {\n        loadAudio();\n    }\n\n    return (\n        <div style={props.style} className='canvas-area no-select' ref={canvasAreaRef}>\n            <br />\n            <br />\n            <div className=\"main-header-container\">\n                <h2 className={\"main-header\"} style={play?{opacity: 0, transition: \"2s opacity\"}:{opacity: 0.8, transition: \"3s opacity\"}}>David Mash</h2>\n            </div>\n            {loaded?\n            <div className=\"control-panel\" onClick={togglePlay}>\n                {play?\n                <img alt={\"\"} src={process.env.PUBLIC_URL + '/images/pause-button.png'} className={\"pause-button\"} />\n                :\n                <img alt={\"\"} src={process.env.PUBLIC_URL + '/images/play-button.png'} className={\"play-button\"} />\n                }\n            </div>\n            :\n            <></>\n            }\n            <br />\n            <canvas ref={frequencyRef} id=\"frequency\" onClick={togglePlay}/>\n            <canvas ref={backgroundRef} id=\"background\" />\n            <img alt={\"\"} src={process.env.PUBLIC_URL + '/images/main_images/' + props.imageNumber + '.jpeg'} style={{objectFit: \"cover\", height: \"100%\", minWidth: \"100%\", width: \"auto\", position: \"absolute\", zIndex: \"-3\", top: \"0px\", left: \"0px\"}}/>\n            <div\n                className='bottom-controls'\n                onMouseOver={() => {if (!mouseOverBottom) setMouseOverBottom(true);}}\n                onMouseLeave={() => {if (mouseOverBottom) setMouseOverBottom(false);}}\n                style={mouseOverBottom?{opacity: 0.8, transition: \"opacity 300ms\"}:play?{opacity: 0, transition: \"opacity 300ms\"}:{opacity: 0.4, transition: \"opacity 300ms\"}}\n            >\n                <input\n                    ref={scrubBarRef}\n                    className=\"scrub-bar\"\n                    type=\"range\"\n                    min=\"0\"\n                    max=\"100\"\n                    defaultValue={0}\n                    id=\"scrub-bar\"\n                    disabled={!loaded}\n                    onChange={() => {updatePlayback();}}\n                />\n                {/*<input className={\"file-input\"} type=\"file\" ref={fileInputRef} onChange={loadAudio} />*/}\n            </div>\n        </div>\n    );\n}\n\nexport default AudioVisualizer;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC1D,OAAOC,QAAQ,MAAM,mBAAmB;AAAC;AAAA;AAEzC,SAASC,eAAe,CAACC,KAAK,EAAE;EAAA;EAC5B,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACO,MAAM,EAAEC,SAAS,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAMS,aAAa,GAAGV,MAAM,CAAC,IAAI,CAAC;EAClC,MAAMW,YAAY,GAAGX,MAAM,CAAC,IAAI,CAAC;EACjC,MAAMY,YAAY,GAAGZ,MAAM,CAAC,IAAI,CAAC;EACjC,MAAMa,aAAa,GAAGb,MAAM,CAAC,IAAI,CAAC;EAClC,MAAMc,WAAW,GAAGd,MAAM,CAAC,IAAI,CAAC;EAChC,MAAM,CAACe,IAAI,EAAEC,OAAO,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EACvC,MAAM,CAACgB,eAAe,EAAEC,kBAAkB,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;;EAE7D;EACA,MAAMkB,MAAM,GAAG,IAAIC,MAAM,CAACjB,QAAQ,CAAC;EAEnCD,SAAS,CAAC,MAAM;IACZ;IACA,MAAMmB,WAAW,GAAGX,aAAa,CAACY,OAAO,CAACC,WAAW;IACrD,MAAMC,YAAY,GAAGd,aAAa,CAACY,OAAO,CAACG,YAAY;IACvDN,MAAM,CAACO,WAAW,CAAC;MAAEf,YAAY;MAAEU,WAAW;MAAEG,YAAY;MAAEV,WAAW;MAAEL,SAAS;MAAEO,OAAO;MAAEJ,YAAY;MAAEC;IAAa,CAAC,CAAC;IAE5HM,MAAM,CAACQ,SAAS,GAAIC,CAAC,IAAK;MACtB;MACA,IAAIA,CAAC,CAACC,IAAI,CAACC,IAAI,KAAK,QAAQ,EAAE;QAC1BrB,SAAS,CAAC,IAAI,CAAC;MACnB,CAAC,MAAM,IAAImB,CAAC,CAACC,IAAI,CAACC,IAAI,KAAK,eAAe,EAAE;QACxChB,WAAW,CAACQ,OAAO,CAACS,KAAK,GAAGH,CAAC,CAACC,IAAI,CAACE,KAAK;MAC5C;IACJ,CAAC;IAED,OAAO,MAAM;MACT;MACAZ,MAAM,CAACa,SAAS,EAAE;IACtB,CAAC;EACL,CAAC,EAAE,CAACjB,IAAI,EAAEJ,YAAY,CAAC,CAAC;;EAExB;EACA,SAASsB,SAAS,GAAG;IACjB,IAAI3B,YAAY,EAAE;MACdA,YAAY,CAAC4B,KAAK,EAAE;MACpB5B,YAAY,CAAC6B,WAAW,GAAG,CAAC;IAChC;IACA5B,eAAe,CAAC,IAAI6B,KAAK,EAAE,CAAC;EAChC;EAEA,SAASC,cAAc,GAAG;IACtB,IAAG/B,YAAY,IAAIQ,WAAW,CAACQ,OAAO,EAAE;MACpC,IAAIgB,aAAa,GAAGxB,WAAW,CAACQ,OAAO,CAACS,KAAK;MAC7C,IAAII,WAAW,GAAIG,aAAa,GAAG,GAAG,GAAIhC,YAAY,CAACiC,QAAQ;MAC/DjC,YAAY,CAAC6B,WAAW,GAAGA,WAAW;IAC1C;EACJ;EAEA,SAASK,UAAU,GAAG;IAClB,IAAIlC,YAAY,EAAE;MACd,IAAIA,YAAY,CAACmC,MAAM,EAAE;QACrBnC,YAAY,CAACS,IAAI,EAAE;QACnBC,OAAO,CAAC,IAAI,CAAC;MACjB,CAAC,MAAM;QACHV,YAAY,CAAC4B,KAAK,EAAE;QACpBlB,OAAO,CAAC,KAAK,CAAC;MAClB;IACJ;EACJ;EAEA,IAAI,CAACV,YAAY,EAAE;IACf2B,SAAS,EAAE;EACf;EAEA,oBACI;IAAK,KAAK,EAAE5B,KAAK,CAACqC,KAAM;IAAC,SAAS,EAAC,uBAAuB;IAAC,GAAG,EAAEhC,aAAc;IAAA,wBAC1E;MAAA;MAAA;MAAA;IAAA,QAAM,eACN;MAAA;MAAA;MAAA;IAAA,QAAM,eACN;MAAK,SAAS,EAAC,uBAAuB;MAAA,uBAClC;QAAI,SAAS,EAAE,aAAc;QAAC,KAAK,EAAEK,IAAI,GAAC;UAAC4B,OAAO,EAAE,CAAC;UAAEC,UAAU,EAAE;QAAY,CAAC,GAAC;UAACD,OAAO,EAAE,GAAG;UAAEC,UAAU,EAAE;QAAY,CAAE;QAAA,UAAC;MAAU;QAAA;QAAA;QAAA;MAAA;IAAK;MAAA;MAAA;MAAA;IAAA,QACxI,EACLpC,MAAM,gBACP;MAAK,SAAS,EAAC,eAAe;MAAC,OAAO,EAAEgC,UAAW;MAAA,UAC9CzB,IAAI,gBACL;QAAK,GAAG,EAAE,EAAG;QAAC,GAAG,EAAE8B,OAAO,CAACC,GAAG,CAACC,UAAU,GAAG,0BAA2B;QAAC,SAAS,EAAE;MAAe;QAAA;QAAA;QAAA;MAAA,QAAG,gBAErG;QAAK,GAAG,EAAE,EAAG;QAAC,GAAG,EAAEF,OAAO,CAACC,GAAG,CAACC,UAAU,GAAG,yBAA0B;QAAC,SAAS,EAAE;MAAc;QAAA;QAAA;QAAA;MAAA;IAAG;MAAA;MAAA;MAAA;IAAA,QAEjG,gBAEN,qCAAK,eAEL;MAAA;MAAA;MAAA;IAAA,QAAM,eACN;MAAQ,GAAG,EAAEnC,YAAa;MAAC,EAAE,EAAC,WAAW;MAAC,OAAO,EAAE4B;IAAW;MAAA;MAAA;MAAA;IAAA,QAAE,eAChE;MAAQ,GAAG,EAAE3B,aAAc;MAAC,EAAE,EAAC;IAAY;MAAA;MAAA;MAAA;IAAA,QAAG,eAC9C;MAAK,GAAG,EAAE,EAAG;MAAC,GAAG,EAAEgC,OAAO,CAACC,GAAG,CAACC,UAAU,GAAG,sBAAsB,GAAG1C,KAAK,CAAC2C,WAAW,GAAG,OAAQ;MAAC,KAAK,EAAE;QAACC,SAAS,EAAE,OAAO;QAAEC,MAAM,EAAE,MAAM;QAAEC,QAAQ,EAAE,MAAM;QAAEC,KAAK,EAAE,MAAM;QAAEC,QAAQ,EAAE,UAAU;QAAEC,MAAM,EAAE,IAAI;QAAEC,GAAG,EAAE,KAAK;QAAEC,IAAI,EAAE;MAAK;IAAE;MAAA;MAAA;MAAA;IAAA,QAAE,eAC9O;MACI,SAAS,EAAC,iBAAiB;MAC3B,WAAW,EAAE,MAAM;QAAC,IAAI,CAACvC,eAAe,EAAEC,kBAAkB,CAAC,IAAI,CAAC;MAAC,CAAE;MACrE,YAAY,EAAE,MAAM;QAAC,IAAID,eAAe,EAAEC,kBAAkB,CAAC,KAAK,CAAC;MAAC,CAAE;MACtE,KAAK,EAAED,eAAe,GAAC;QAAC0B,OAAO,EAAE,GAAG;QAAEC,UAAU,EAAE;MAAe,CAAC,GAAC7B,IAAI,GAAC;QAAC4B,OAAO,EAAE,CAAC;QAAEC,UAAU,EAAE;MAAe,CAAC,GAAC;QAACD,OAAO,EAAE,GAAG;QAAEC,UAAU,EAAE;MAAe,CAAE;MAAA,uBAE9J;QACI,GAAG,EAAE9B,WAAY;QACjB,SAAS,EAAC,WAAW;QACrB,IAAI,EAAC,OAAO;QACZ,GAAG,EAAC,GAAG;QACP,GAAG,EAAC,KAAK;QACT,YAAY,EAAE,CAAE;QAChB,EAAE,EAAC,WAAW;QACd,QAAQ,EAAE,CAACN,MAAO;QAClB,QAAQ,EAAE,MAAM;UAAC6B,cAAc,EAAE;QAAC;MAAE;QAAA;QAAA;QAAA;MAAA;IACtC;MAAA;MAAA;MAAA;IAAA,QAEA;EAAA;IAAA;IAAA;IAAA;EAAA,QACJ;AAEd;AAAC,GA/GQjC,eAAe;AAAA,KAAfA,eAAe;AAiHxB,eAAeA,eAAe;AAAC;AAAA"},"metadata":{},"sourceType":"module"}