{"ast":null,"code":"import _slicedToArray from\"/Users/davidmash/Documents/davidmash.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState,useEffect}from'react';import VisibilitySensor from'react-visibility-sensor';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AudioVisualizer(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),audioElement=_useState2[0],setAudioElement=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),analyser=_useState4[0],setAnalyser=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),audioCtx=_useState6[0],setAudioCtx=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),source=_useState8[0],setSource=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loaded=_useState10[0],setLoaded=_useState10[1];var canvasAreaRef=useRef(null);var fileInputRef=useRef(null);var frequencyRef=useRef(null);var backgroundRef=useRef(null);var scrubBarRef=useRef(null);var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),play=_useState12[0],setPlay=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),mouseOverBottom=_useState14[0],setMouseOverBottom=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),isVisible=_useState16[0],setIsVisible=_useState16[1];useEffect(function(){if(analyser&&source&&audioCtx){// Draw the frequency spectrum visualization\nvar drawVisualization=function drawVisualization(){requestAnimationFrame(drawVisualization);analyser.getByteFrequencyData(dataArray);// draw current frame to main canvas\nfrequencyCtx.clearRect(0,0,frequencyCtx.canvas.width,frequencyCtx.canvas.height);var avgAmplitude=0;var highFreqAvgAmplitude=0;var midFreqAvgAmplitude=0;var lowFreqAvgAmplitude=0;var lowFreqPeakAmplitude=0;if(dataArray&&dataArray.length>0){var gradient=frequencyCtx.createLinearGradient(0,0,frequencyCtx.canvas.width,0);var highFrequencyColor=getHighFrequencyColor(dataArray);gradient.addColorStop(0,highFrequencyColor);gradient.addColorStop(0.5,getLowFrequencyColor(dataArray));gradient.addColorStop(1,highFrequencyColor);frequencyCtx.fillStyle=gradient;var verticalCenter=frequencyCtx.canvas.height/2;var zeroAdjust=0;for(var i=dataArray.length-1;i>=0;i--){if(dataArray[i]-20>0)break;zeroAdjust++;}var barWidth=frequencyCtx.canvas.width/dataArray.length/2;var x=0;var x2=frequencyCtx.canvas.width;for(var _i=0;_i<dataArray.length-zeroAdjust;_i++){drawVisualizationBar(_i,barWidth,x,verticalCenter);drawVisualizationBar(_i,barWidth,x2,verticalCenter);x+=frequencyCtx.canvas.width/(dataArray.length-zeroAdjust)/2;x2-=frequencyCtx.canvas.width/(dataArray.length-zeroAdjust)/2;}avgAmplitude=getAverageAmplitude(dataArray,0,dataArray.length);highFreqAvgAmplitude=getAverageAmplitude(dataArray,12*dataArray.length/16,dataArray.length);midFreqAvgAmplitude=getAverageAmplitude(dataArray,dataArray.length/16,3*dataArray.length/16);lowFreqAvgAmplitude=getAverageAmplitude(dataArray,0,dataArray.length/16);lowFreqPeakAmplitude=getPeakAmplitude(dataArray,0,dataArray.length/16);frequencyCtx.globalAlpha=(Math.abs(0.2-avgAmplitude/200)+0.1)/2;}//smudge effect\nrotateSmudge=rotateSmudge&&!(lowFreqPeakAmplitude>ultimatePeak*1.01)&&midFreqAvgAmplitude+highFreqAvgAmplitude>avgAmplitude*1.8||midFreqAvgAmplitude+highFreqAvgAmplitude>avgAmplitude*3.2;if(rotateSmudge){smudgeCtx.drawImage(frequencyCtx.canvas,0,0);rotationAngle=(rotationAngle+1)%360;smudgeVelocity=lowFreqAvgAmplitude/5*(midFreqAvgAmplitude<highFreqAvgAmplitude*2)?-1:1;// Save the current canvas state\nsmudgeCtx.save();// Rotate the canvas\nsmudgeCtx.translate(smudgeCtx.canvas.width/2,smudgeCtx.canvas.height/2);smudgeCtx.rotate(Math.PI/180*rotationAngle*smudgeVelocity);smudgeCtx.translate(-smudgeCtx.canvas.width/2,-smudgeCtx.canvas.height/2);// Draw the smudged image on the canvas\nsmudgeCtx.drawImage(smudgeCtx.canvas,0,0);// Restore the canvas state\nsmudgeCtx.restore();smudgeCtx.globalAlpha=Math.abs(0.04-avgAmplitude/4000);}else{rotationAngle=0;var imageDataTop=smudgeCtx.getImageData(0,0,smudgeCtx.canvas.width,smudgeCtx.canvas.height/2);var imageDataBottom=smudgeCtx.getImageData(0,smudgeCtx.canvas.height/2,smudgeCtx.canvas.width,smudgeCtx.canvas.height);smudgeCtx.clearRect(0,0,smudgeCtx.canvas.width,smudgeCtx.canvas.height);smudgeCtx.globalAlpha=0.5-avgAmplitude/100;smudgeVelocity=avgAmplitude<10?avgAmplitude*2:(lowFreqPeakAmplitude>=ultimatePeak&&lowFreqAvgAmplitude*0.5>midFreqAvgAmplitude+highFreqAvgAmplitude?-1:1)*avgAmplitude/4;smudgeCtx.putImageData(imageDataTop,0,-smudgeVelocity);smudgeCtx.putImageData(imageDataBottom,0,smudgeCtx.canvas.height/2+smudgeVelocity);smudgeCtx.drawImage(frequencyCtx.canvas,0,0);}};var getAverageAmplitude=function getAverageAmplitude(data,startIndex,endIndex){startIndex=Math.trunc(startIndex);endIndex=Math.min(Math.trunc(endIndex),data.length);var sum=0;for(var i=startIndex;i<endIndex;i++){sum+=data[i];}return sum/(endIndex-startIndex-1);};var getPeakAmplitude=function getPeakAmplitude(data,startIndex,endIndex){startIndex=Math.trunc(startIndex);endIndex=Math.min(Math.trunc(endIndex),data.length);var peak=0;for(var i=startIndex;i<endIndex;i++){peak=Math.max(peak,data[i]);}return peak;};var drawVisualizationBar=function drawVisualizationBar(index,barWidth,x,verticalCenter){if(dataArray[index]>ultimatePeak){ultimatePeak=dataArray[index];}//take the square of the data like this will amplify peaks\nvar adjustedData=8*dataArray[index]*Math.pow(dataArray[index]/ultimatePeak,1.5*(1-index/dataArray.length))*((index+dataArray.length/2)/dataArray.length);var barHeight=adjustedData;var offsetX=(Math.random()-0.5)*adjustedData/32;var offsetY=(Math.random()-0.5)*adjustedData/32;var offsetWidth=(Math.random()-0.5)*adjustedData/32;frequencyCtx.fillRect(x+offsetX,verticalCenter-barHeight/4+offsetY,barWidth+offsetWidth,barHeight/2);};var getLowFrequencyColor=function getLowFrequencyColor(dataArray){var lowFrequencySum=0;var lowFrequencyMax=0;for(var i=0;i<dataArray.length/2;i++){lowFrequencySum+=dataArray[i];if(dataArray[i]>lowFrequencyMax){lowFrequencyMax=dataArray[i];}}var lowFrequencyAverage=lowFrequencySum/(dataArray.length/2);if(lowFrequencyMax>lowFrequencyAverage*10||lowFrequencyAverage>ultimatePeak/2){lowFreqShiftingColorNumber=(lowFreqShiftingColorNumber+lowFrequencyMax/(lowFrequencyAverage*20)+lowFrequencyAverage/ultimatePeak)%255;}return\"hsl(\".concat(map(lowFrequencyAverage,lowFreqShiftingColorNumber,255,lowFreqShiftingColorNumber/4,360),\", 100%, 50%,\")+lowFrequencySum/(lowFrequencyMax+0.1)+\")\";};var getHighFrequencyColor=function getHighFrequencyColor(dataArray){var highFrequencySum=0;var highFrequencyMax=0;for(var i=dataArray.length/2;i<dataArray.length;i++){highFrequencySum+=dataArray[i];if(dataArray[i]>highFrequencyMax){highFrequencyMax=dataArray[i];}}var highFrequencyAverage=highFrequencySum/(dataArray.length/2);if(highFrequencyMax>highFrequencyAverage*200||highFrequencyAverage>ultimatePeak/2){highFreqShiftingColorNumber=(highFreqShiftingColorNumber+highFrequencyMax/(highFrequencyAverage*200)+highFrequencyAverage/ultimatePeak)%255;}return\"hsl(\".concat(map(highFrequencyAverage,highFreqShiftingColorNumber,255,highFrequencyAverage/4,360),\", 100%, 50%,\")+highFrequencySum/(highFrequencyMax+0.1)+\")\";};var map=function map(value,start1,stop1,start2,stop2){return start2+(stop2-start2)*((value-start1)/(stop1-start1));};source.connect(analyser);analyser.connect(audioCtx.destination);togglePlay(true);var bufferLength=analyser.frequencyBinCount;var dataArray=new Uint8Array(bufferLength);frequencyRef.current.willReadFrequently=true;backgroundRef.current.willReadFrequently=true;var frequencyCtx=frequencyRef.current.getContext(\"2d\");var smudgeCtx=backgroundRef.current.getContext(\"2d\");backgroundRef.current.style.width='100%';backgroundRef.current.style.height='100%';frequencyRef.current.style.width='100%';frequencyRef.current.style.height='100%';backgroundRef.current.width=canvasAreaRef.current.offsetWidth;backgroundRef.current.height=canvasAreaRef.current.offsetHeight;frequencyRef.current.width=canvasAreaRef.current.offsetWidth;frequencyRef.current.height=canvasAreaRef.current.offsetHeight;canvasAreaRef.current.addEventListener(\"resize\",function(){backgroundRef.current.width=canvasAreaRef.current.offsetWidth;backgroundRef.current.height=canvasAreaRef.current.offsetHeight;frequencyRef.current.width=canvasAreaRef.current.offsetWidth;frequencyRef.current.height=canvasAreaRef.current.offsetHeight;});var ultimatePeak=1;var rotationAngle=0;var rotateSmudge=false;var smudgeVelocity=0;var lowFreqShiftingColorNumber=0;var highFreqShiftingColorNumber=0;drawVisualization();}},[analyser,source,audioCtx]);useEffect(function(){if(audioCtx&&audioElement){setAnalyser(audioCtx.createAnalyser());setSource(audioCtx.createMediaElementSource(audioElement));}},[audioCtx,audioElement]);useEffect(function(){if(audioElement){var updateScrubBar=function updateScrubBar(){if(audioElement&&scrubBarRef.current){var currentTime=audioElement.currentTime;var duration=audioElement.duration;var scrubBarValue=currentTime/duration*100;scrubBarRef.current.value=scrubBarValue;}};audioElement.addEventListener(\"timeupdate\",updateScrubBar);audioElement.src=fileInputRef.current&&fileInputRef.current.files[0]?URL.createObjectURL(fileInputRef.current.files[0]):process.env.PUBLIC_URL+'/music/song.mp3';audioElement.addEventListener(\"loadeddata\",function(){setLoaded(true);});audioElement.addEventListener(\"ended\",function(){setPlay(false);});setAudioCtx(new(window.AudioContext||window.webkitAudioContext)());}},[audioElement]);// Initialize audio context and elements when the file input changes\nfunction loadAudio(){if(audioElement){audioElement.pause();audioElement.currentTime=0;}setAnalyser(null);setSource(null);setAudioCtx(null);setAudioElement(new Audio());}function updatePlayback(){if(audioElement&&scrubBarRef.current){var scrubBarValue=scrubBarRef.current.value;var currentTime=scrubBarValue/100*audioElement.duration;audioElement.currentTime=currentTime;}}function togglePlay(given){if(audioElement&&audioCtx){audioCtx.resume();if(given===true||audioElement.paused){audioElement.play();setPlay(true);}else{audioElement.pause();setPlay(false);}}else{loadAudio();}}return/*#__PURE__*/_jsx(VisibilitySensor,{onChange:setIsVisible,children:/*#__PURE__*/_jsxs(\"div\",{style:props.style,className:\"canvas-area no-select\",ref:canvasAreaRef,children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"main-header-container\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"main-header\",style:play?{opacity:0,transition:\"2s opacity\"}:{opacity:0.8,transition:\"3s opacity\"},children:\"David Mash\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"control-panel\",onClick:togglePlay,children:play?/*#__PURE__*/_jsx(\"img\",{alt:\"\",src:process.env.PUBLIC_URL+'/images/pause-button.png',className:\"pause-button\"}):/*#__PURE__*/_jsx(\"img\",{alt:\"\",src:process.env.PUBLIC_URL+'/images/play-button.png',className:\"play-button\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"canvas\",{ref:frequencyRef,id:\"frequency\",onClick:togglePlay}),/*#__PURE__*/_jsx(\"canvas\",{ref:backgroundRef,id:\"background\"}),/*#__PURE__*/_jsx(\"img\",{alt:\"\",src:process.env.PUBLIC_URL+'/images/main_images/'+props.imageNumber+'.jpeg',style:{objectFit:\"cover\",height:\"100%\",minWidth:\"100%\",width:\"auto\",position:\"absolute\",zIndex:\"-3\",top:\"0px\",left:\"0px\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"bottom-controls\",onMouseOver:function onMouseOver(){if(!mouseOverBottom)setMouseOverBottom(true);},onMouseLeave:function onMouseLeave(){if(mouseOverBottom)setMouseOverBottom(false);},style:mouseOverBottom?{opacity:0.7,transition:\"opacity 300ms\"}:play?{opacity:0,transition:\"opacity 300ms\"}:{opacity:0.4,transition:\"opacity 300ms\"},children:/*#__PURE__*/_jsx(\"input\",{ref:scrubBarRef,className:\"scrub-bar\",type:\"range\",min:\"0\",max:\"100\",defaultValue:0,id:\"scrub-bar\",disabled:!loaded,onChange:function onChange(){updatePlayback();}})})]})});}export default AudioVisualizer;","map":{"version":3,"names":["React","useRef","useState","useEffect","VisibilitySensor","AudioVisualizer","props","audioElement","setAudioElement","analyser","setAnalyser","audioCtx","setAudioCtx","source","setSource","loaded","setLoaded","canvasAreaRef","fileInputRef","frequencyRef","backgroundRef","scrubBarRef","play","setPlay","mouseOverBottom","setMouseOverBottom","isVisible","setIsVisible","drawVisualization","requestAnimationFrame","getByteFrequencyData","dataArray","frequencyCtx","clearRect","canvas","width","height","avgAmplitude","highFreqAvgAmplitude","midFreqAvgAmplitude","lowFreqAvgAmplitude","lowFreqPeakAmplitude","length","gradient","createLinearGradient","highFrequencyColor","getHighFrequencyColor","addColorStop","getLowFrequencyColor","fillStyle","verticalCenter","zeroAdjust","i","barWidth","x","x2","drawVisualizationBar","getAverageAmplitude","getPeakAmplitude","globalAlpha","Math","abs","rotateSmudge","ultimatePeak","smudgeCtx","drawImage","rotationAngle","smudgeVelocity","save","translate","rotate","PI","restore","imageDataTop","getImageData","imageDataBottom","putImageData","data","startIndex","endIndex","trunc","min","sum","peak","max","index","adjustedData","pow","barHeight","offsetX","random","offsetY","offsetWidth","fillRect","lowFrequencySum","lowFrequencyMax","lowFrequencyAverage","lowFreqShiftingColorNumber","map","highFrequencySum","highFrequencyMax","highFrequencyAverage","highFreqShiftingColorNumber","value","start1","stop1","start2","stop2","connect","destination","togglePlay","bufferLength","frequencyBinCount","Uint8Array","current","willReadFrequently","getContext","style","offsetHeight","addEventListener","createAnalyser","createMediaElementSource","updateScrubBar","currentTime","duration","scrubBarValue","src","files","URL","createObjectURL","process","env","PUBLIC_URL","window","AudioContext","webkitAudioContext","loadAudio","pause","Audio","updatePlayback","given","resume","paused","opacity","transition","imageNumber","objectFit","minWidth","position","zIndex","top","left"],"sources":["/Users/davidmash/Documents/davidmash.github.io/src/Components/AudioVisualizer.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport VisibilitySensor from 'react-visibility-sensor';\n\nfunction AudioVisualizer(props) {\n    const [audioElement, setAudioElement] = useState(null);\n    const [analyser, setAnalyser] = useState(null);\n    const [audioCtx, setAudioCtx] = useState(null);\n    const [source, setSource] = useState(null);\n    const [loaded, setLoaded] = useState(false);\n    const canvasAreaRef = useRef(null);\n    const fileInputRef = useRef(null);\n    const frequencyRef = useRef(null);\n    const backgroundRef = useRef(null);\n    const scrubBarRef = useRef(null);\n    const [play, setPlay] = useState(false);\n    const [mouseOverBottom, setMouseOverBottom] = useState(false);\n    const [isVisible, setIsVisible] = useState(true);\n\n    useEffect(() => {\n        if (analyser && source && audioCtx) {\n            source.connect(analyser);\n            analyser.connect(audioCtx.destination);\n            togglePlay(true);\n\n            const bufferLength = analyser.frequencyBinCount;\n            let dataArray = new Uint8Array(bufferLength);\n\n            frequencyRef.current.willReadFrequently = true;\n            backgroundRef.current.willReadFrequently = true;\n            const frequencyCtx = frequencyRef.current.getContext(\"2d\");\n            const smudgeCtx = backgroundRef.current.getContext(\"2d\");\n            backgroundRef.current.style.width ='100%';\n            backgroundRef.current.style.height='100%';\n            frequencyRef.current.style.width ='100%';\n            frequencyRef.current.style.height='100%';\n            backgroundRef.current.width  = canvasAreaRef.current.offsetWidth;\n            backgroundRef.current.height = canvasAreaRef.current.offsetHeight;\n            frequencyRef.current.width  = canvasAreaRef.current.offsetWidth;\n            frequencyRef.current.height = canvasAreaRef.current.offsetHeight;\n\n            canvasAreaRef.current.addEventListener(\"resize\", () => {\n                backgroundRef.current.width  = canvasAreaRef.current.offsetWidth;\n                backgroundRef.current.height = canvasAreaRef.current.offsetHeight;\n                frequencyRef.current.width  = canvasAreaRef.current.offsetWidth;\n                frequencyRef.current.height = canvasAreaRef.current.offsetHeight;\n            });\n\n            let ultimatePeak = 1;\n            let rotationAngle = 0;\n            let rotateSmudge = false;\n            let smudgeVelocity = 0;\n\n            // Draw the frequency spectrum visualization\n            function drawVisualization() {\n                requestAnimationFrame(drawVisualization);\n                analyser.getByteFrequencyData(dataArray);\n                \n                // draw current frame to main canvas\n                frequencyCtx.clearRect(0, 0, frequencyCtx.canvas.width, frequencyCtx.canvas.height);\n        \n                let avgAmplitude = 0;\n                let highFreqAvgAmplitude = 0;\n                let midFreqAvgAmplitude = 0;\n                let lowFreqAvgAmplitude = 0;\n                let lowFreqPeakAmplitude = 0;\n                if (dataArray && dataArray.length > 0) {\n                    let gradient = frequencyCtx.createLinearGradient(0, 0, frequencyCtx.canvas.width, 0);\n                    let highFrequencyColor = getHighFrequencyColor(dataArray);\n                    gradient.addColorStop(0, highFrequencyColor);\n                    gradient.addColorStop(0.5, getLowFrequencyColor(dataArray));\n                    gradient.addColorStop(1, highFrequencyColor);\n                    frequencyCtx.fillStyle = gradient;\n                    let verticalCenter = frequencyCtx.canvas.height / 2;\n                    let zeroAdjust = 0;\n                    for (let i = dataArray.length - 1; i >= 0; i--) {\n                        if (dataArray[i] - 20 > 0) break;\n                        zeroAdjust++;\n                    }\n                    let barWidth = ((frequencyCtx.canvas.width / dataArray.length)) / 2;\n                    let x = 0;\n                    let x2 = frequencyCtx.canvas.width;\n                    for (let i = 0; i < dataArray.length - zeroAdjust; i++) {\n                        drawVisualizationBar(i, barWidth, x, verticalCenter);\n                        drawVisualizationBar(i, barWidth, x2, verticalCenter);\n                        x += (frequencyCtx.canvas.width / (dataArray.length - zeroAdjust)) / 2;\n                        x2 -= (frequencyCtx.canvas.width / (dataArray.length - zeroAdjust)) / 2;\n                    }\n                    avgAmplitude = getAverageAmplitude(dataArray, 0, dataArray.length);\n                    highFreqAvgAmplitude = getAverageAmplitude(dataArray, 12 * dataArray.length / 16, dataArray.length);\n                    midFreqAvgAmplitude = getAverageAmplitude(dataArray, dataArray.length / 16, 3 * dataArray.length / 16);\n                    lowFreqAvgAmplitude = getAverageAmplitude(dataArray, 0, dataArray.length / 16);\n                    lowFreqPeakAmplitude = getPeakAmplitude(dataArray, 0, dataArray.length / 16);\n                    frequencyCtx.globalAlpha = (Math.abs(0.2 - (avgAmplitude / 200)) + 0.1) / 2;\n                }\n\n                //smudge effect\n                rotateSmudge = (rotateSmudge && !(lowFreqPeakAmplitude > ultimatePeak * 1.01) && midFreqAvgAmplitude + highFreqAvgAmplitude > avgAmplitude * 1.8) || midFreqAvgAmplitude + highFreqAvgAmplitude > avgAmplitude * 3.2;\n                if (rotateSmudge) {\n                    smudgeCtx.drawImage(frequencyCtx.canvas, 0, 0);\n                    rotationAngle = (rotationAngle + 1) % 360;\n                    smudgeVelocity = (lowFreqAvgAmplitude) / 5 * (midFreqAvgAmplitude < highFreqAvgAmplitude * 2)? -1: 1;\n                    // Save the current canvas state\n                    smudgeCtx.save();\n                    // Rotate the canvas\n                    smudgeCtx.translate(smudgeCtx.canvas.width / 2, smudgeCtx.canvas.height / 2);\n                    smudgeCtx.rotate(Math.PI / 180 * rotationAngle * smudgeVelocity);\n                    smudgeCtx.translate(-smudgeCtx.canvas.width / 2, -smudgeCtx.canvas.height / 2);\n                    // Draw the smudged image on the canvas\n                    smudgeCtx.drawImage(smudgeCtx.canvas, 0, 0);\n                    // Restore the canvas state\n                    smudgeCtx.restore();\n                    smudgeCtx.globalAlpha = Math.abs(0.04 - (avgAmplitude / 4000));\n                } else {\n                    rotationAngle = 0;\n                    var imageDataTop = smudgeCtx.getImageData(0, 0, smudgeCtx.canvas.width, smudgeCtx.canvas.height / 2);\n                    var imageDataBottom = smudgeCtx.getImageData(0, smudgeCtx.canvas.height / 2, smudgeCtx.canvas.width, smudgeCtx.canvas.height);\n                    smudgeCtx.clearRect(0, 0, smudgeCtx.canvas.width, smudgeCtx.canvas.height);\n                    smudgeCtx.globalAlpha = 0.5 - (avgAmplitude / 100);\n                    smudgeVelocity = (avgAmplitude < 10)? avgAmplitude * 2: ((lowFreqPeakAmplitude >= ultimatePeak && lowFreqAvgAmplitude * 0.5 > midFreqAvgAmplitude + highFreqAvgAmplitude)? -1: 1) * avgAmplitude / 4;\n                    smudgeCtx.putImageData(imageDataTop, 0, -smudgeVelocity);\n                    smudgeCtx.putImageData(imageDataBottom, 0, (smudgeCtx.canvas.height / 2) + smudgeVelocity);\n                    smudgeCtx.drawImage(frequencyCtx.canvas, 0, 0);\n                }\n            }\n        \n            function getAverageAmplitude(data, startIndex, endIndex) {\n                startIndex = Math.trunc(startIndex);\n                endIndex = Math.min(Math.trunc(endIndex), data.length);\n                let sum = 0;\n                for (let i = startIndex; i < endIndex; i++) {\n                    sum += data[i];\n                }\n                return sum / (endIndex - startIndex - 1);\n            }\n        \n            function getPeakAmplitude(data, startIndex, endIndex) {\n                startIndex = Math.trunc(startIndex);\n                endIndex = Math.min(Math.trunc(endIndex), data.length);\n                let peak = 0;\n                for (let i = startIndex; i < endIndex; i++) {\n                    peak = Math.max(peak, data[i]);\n                }\n                return peak;\n            }\n        \n            function drawVisualizationBar(index, barWidth, x, verticalCenter) {\n                if (dataArray[index] > ultimatePeak) {\n                    ultimatePeak = dataArray[index];\n                }\n                //take the square of the data like this will amplify peaks\n                const adjustedData = 8 * dataArray[index] * Math.pow(dataArray[index] / ultimatePeak, 1.5 * (1 - (index / dataArray.length))) * ((index + (dataArray.length / 2)) / dataArray.length);\n                let barHeight = adjustedData;\n                let offsetX = (Math.random() - 0.5) * adjustedData / 32;\n                let offsetY = (Math.random() - 0.5) * adjustedData / 32;\n                let offsetWidth = (Math.random() - 0.5) * adjustedData / 32;\n                frequencyCtx.fillRect(x + offsetX, verticalCenter - (barHeight / 4) + offsetY, barWidth + offsetWidth, barHeight / 2);\n            }\n        \n            let lowFreqShiftingColorNumber = 0;\n            function getLowFrequencyColor(dataArray) {\n                let lowFrequencySum = 0;\n                let lowFrequencyMax = 0;\n                for (let i = 0; i < dataArray.length / 2; i++) {\n                    lowFrequencySum += dataArray[i];\n                    if (dataArray[i] > lowFrequencyMax) {\n                        lowFrequencyMax = dataArray[i];\n                    }\n                }\n                let lowFrequencyAverage = lowFrequencySum / (dataArray.length / 2);\n                if (lowFrequencyMax > lowFrequencyAverage * 10 || lowFrequencyAverage > ultimatePeak / 2) {\n                    lowFreqShiftingColorNumber = (lowFreqShiftingColorNumber + (lowFrequencyMax / (lowFrequencyAverage * 20)) + (lowFrequencyAverage / ultimatePeak)) % 255;\n                }\n                return `hsl(${map(lowFrequencyAverage, lowFreqShiftingColorNumber, 255, lowFreqShiftingColorNumber / 4, 360)}, 100%, 50%,` + (lowFrequencySum / (lowFrequencyMax + 0.1)) + `)`;\n            }\n        \n            let highFreqShiftingColorNumber = 0;\n            function getHighFrequencyColor(dataArray) {\n                let highFrequencySum = 0;\n                let highFrequencyMax = 0;\n                for (let i = dataArray.length / 2; i < dataArray.length; i++) {\n                    highFrequencySum += dataArray[i];\n                    if (dataArray[i] > highFrequencyMax) {\n                        highFrequencyMax = dataArray[i];\n                    }\n                }\n                let highFrequencyAverage = highFrequencySum / (dataArray.length/ 2);\n                if (highFrequencyMax > highFrequencyAverage * 200 || highFrequencyAverage > ultimatePeak / 2) {\n                    highFreqShiftingColorNumber = (highFreqShiftingColorNumber + (highFrequencyMax / (highFrequencyAverage * 200)) + (highFrequencyAverage / ultimatePeak)) % 255;\n                }\n                return `hsl(${map(highFrequencyAverage, highFreqShiftingColorNumber, 255, highFrequencyAverage / 4, 360)}, 100%, 50%,` + (highFrequencySum / (highFrequencyMax + 0.1)) + `)`;\n            }\n        \n            function map(value, start1, stop1, start2, stop2) {\n                return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n            }\n\n            drawVisualization();\n        }\n    }, [analyser, source, audioCtx]);\n\n    useEffect(() => {\n        if (audioCtx && audioElement) {\n            setAnalyser(audioCtx.createAnalyser());\n            setSource(audioCtx.createMediaElementSource(audioElement));\n        }\n    }, [audioCtx, audioElement]);\n\n    useEffect(() => {\n        if (audioElement) {\n            function updateScrubBar() {\n                if(audioElement && scrubBarRef.current) {\n                    let currentTime = audioElement.currentTime;\n                    let duration = audioElement.duration;\n                    let scrubBarValue = (currentTime/duration) * 100;\n                    scrubBarRef.current.value = scrubBarValue;\n                }\n            }\n            audioElement.addEventListener(\"timeupdate\", updateScrubBar);\n            audioElement.src = (fileInputRef.current && fileInputRef.current.files[0])? URL.createObjectURL(fileInputRef.current.files[0]): process.env.PUBLIC_URL + '/music/song.mp3';\n            audioElement.addEventListener(\"loadeddata\", () => {\n                setLoaded(true);\n            });\n            audioElement.addEventListener(\"ended\", () => {\n                setPlay(false);\n            });\n            setAudioCtx(new (window.AudioContext || window.webkitAudioContext)());\n        }\n    }, [audioElement]);\n\n    // Initialize audio context and elements when the file input changes\n    function loadAudio() {\n        if (audioElement) {\n            audioElement.pause();\n            audioElement.currentTime = 0;\n        }\n        setAnalyser(null);\n        setSource(null);\n        setAudioCtx(null);\n        setAudioElement(new Audio());\n    }\n\n    function updatePlayback() {\n        if(audioElement && scrubBarRef.current) {\n            let scrubBarValue = scrubBarRef.current.value;\n            let currentTime = (scrubBarValue / 100) * audioElement.duration;\n            audioElement.currentTime = currentTime;\n        }\n    }\n\n    function togglePlay(given) {\n        if (audioElement && audioCtx) {\n            audioCtx.resume();\n            if ((given === true) || audioElement.paused) {\n                audioElement.play();\n                setPlay(true);\n            } else {\n                audioElement.pause();\n                setPlay(false);\n            }\n        } else {\n            loadAudio();\n        }\n    }\n\n    return (\n        <VisibilitySensor onChange={setIsVisible}>\n            <div style={props.style} className='canvas-area no-select' ref={canvasAreaRef}>\n                <br />\n                <br />\n                <div className=\"main-header-container\">\n                    <h2 className={\"main-header\"} style={play?{opacity: 0, transition: \"2s opacity\"}:{opacity: 0.8, transition: \"3s opacity\"}}>David Mash</h2>\n                </div>\n                <div className=\"control-panel\" onClick={togglePlay}>\n                    {play?\n                    <img alt={\"\"} src={process.env.PUBLIC_URL + '/images/pause-button.png'} className={\"pause-button\"} />\n                    :\n                    <img alt={\"\"} src={process.env.PUBLIC_URL + '/images/play-button.png'} className={\"play-button\"} />\n                    }\n                </div>\n                <br />\n                <canvas ref={frequencyRef} id=\"frequency\" onClick={togglePlay}/>\n                <canvas ref={backgroundRef} id=\"background\" />\n                <img alt={\"\"} src={process.env.PUBLIC_URL + '/images/main_images/' + props.imageNumber + '.jpeg'} style={{objectFit: \"cover\", height: \"100%\", minWidth: \"100%\", width: \"auto\", position: \"absolute\", zIndex: \"-3\", top: \"0px\", left: \"0px\"}}/>\n                <div\n                    className='bottom-controls'\n                    onMouseOver={() => {if (!mouseOverBottom) setMouseOverBottom(true);}}\n                    onMouseLeave={() => {if (mouseOverBottom) setMouseOverBottom(false);}}\n                    style={mouseOverBottom?{opacity: 0.7, transition: \"opacity 300ms\"}:play?{opacity: 0, transition: \"opacity 300ms\"}:{opacity: 0.4, transition: \"opacity 300ms\"}}\n                >\n                    <input\n                        ref={scrubBarRef}\n                        className=\"scrub-bar\"\n                        type=\"range\"\n                        min=\"0\"\n                        max=\"100\"\n                        defaultValue={0}\n                        id=\"scrub-bar\"\n                        disabled={!loaded}\n                        onChange={() => {updatePlayback();}}\n                    />\n                    {/*<input className={\"file-input\"} type=\"file\" ref={fileInputRef} onChange={loadAudio} />*/}\n                </div>\n            </div>\n        </VisibilitySensor>\n    );\n}\n\nexport default AudioVisualizer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}